{% extends 'base.html' %} 
{% load i18n %} 
{% load url from future %} 
{% load dictionary_tags %}
{% load setup_advertising %}

{% block title %}
    {% blocktrans with profile.user.username as username %}
        {{username }} reminder options
    {% endblocktrans %}
{% endblock %} 

{% block head %}
    <link href="{{STATIC_URL}}styles/widgets.css" rel="stylesheet" type="text/css" />
    <link href="{{STATIC_URL}}styles/advertising-setup.css" rel="stylesheet" type="text/css" />
    <link href="{{STATIC_URL}}styles/accounts/accounts.css" rel="stylesheet" type="text/css" />
    <link href="{{STATIC_URL}}styles/crop.css" rel="stylesheet" type="text/css" />

    <script src="{{STATIC_URL}}js/jquery.balloon.js" type="text/javascript"></script>
    <script src="{{STATIC_URL}}js/searchpad/jquery.qap_dropdown.js" type="text/javascript"></script>    
    <script src="{{STATIC_URL}}js/create_event/venue_account_owner.js" type="text/javascript"></script>
    <script src="{{STATIC_URL}}js/date-range.js" type="text/javascript"></script>
    <script src="{{STATIC_URL}}js/advertising/setup-page.js" type="text/javascript"></script>
{% endblock %}

{% block page %}
    <div class="primary-content advertising-setup">
        <h1>
            {{ campaign.name }}({{ campaign.website }})
        </h1>

        <div class="tabs-container">
            <ul class="tabs right-tabs">
                <li class="current"><a href="{% url 'advertising_edit_campaign' campaign.id %}"><span>Edit</span></a></li>
                <li><a href="{% url 'advertising_deposit_funds_for_campaign' campaign.id %}">Deposit Funds</a></li>
                <li><a href="{% url 'advertising_remove_campaign' campaign.id %}" class="danger-action" data-confirm-message="Are you sure? All ads and statistics will be lost">Remove</a></li>
            </ul>
        </div>
        <div class="content box visible">
            <div class="main-content account-options">
                {%if form.errors %}
                    <div class="errors" style="border:1px solid RED;border-radius:4px;">
                        <ul style="list-style-type: none;">
                            <li id="all-info">
                                {% for error in form.non_field_errors %}
                                    <span class="error">{{ error }}</span>
                                {% endfor %}
                            </li>
                            <li id="all-info">
                                {% for error in form.name.errors %}
                                    <span class="error">{{ error }}</span>
                                {% endfor %}
                            </li>
                            <li id="all-info">
                                {% for error in form.active_to.errors %}
                                    <span class="error">{{ error }}</span>
                                {% endfor %}
                            </li>
                            <li id="all-info">
                                {% for error in form.website.errors %}
                                    <span class="error">{{ error }}</span>
                                {% endfor %}
                            </li>
                        </ul>
                    </div>
                    
                {% endif %}
                <form  enctype="multipart/form-data" method="post" name="advertising-campaign-edit" >
                    {% csrf_token %}
                    <div class="campaign-name">
                        Name of Campaign
                        {{ form.name }}
                        Enter the name of your campaign.
                    </div>

                    <div class="campaign-owner venue-account-owner">
                        Campaign owner
                        {{ form.venue_account }}
                    </div>

                    <div class="campaign-name">
                        Campaign website URL
                        {{ form.website }}
                    </div>

                    <div class="campaign-active-to">
                        Will be active
                        {{ form.active_from }} - {{ form.active_to }}
                    </div>
 
                    {% setup_advertising_types %}

                    <div class="advertising-uploads">
                        <table>
                        {% for advertising_type in advertising_types %}
                            <tr data-ad-type="{{ advertising_type.id }}" {% if advertising_type.id in chosen_advertising_types %}class="chosen"{% endif %}>
                                <td>Upload {{advertising_type}}</td>
                                <td>
                                    <input type="file" name="advertising_image.{{advertising_type.id}}">
                                </td>
                                <td>
                                    {% if advertising_type.id in advertising_images %}
                                        <a href="/media/{{ advertising_images|keyvalue:advertising_type.id }}" class="advertising-image" target="_blank">
                                            <!-- Advertising preview -->
                                            view actual ad
                                        </a>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                        </table>
                    </div>
                    
                    Select province/territory to show your ad (Choices)
                    
                    <div class="advertising-territories options">
                        <div class="teritory-node">
                            <div class="checkbox">
                                <input {% if form.all_of_canada.value %}checked="checked"{% endif %} type="checkbox" id="id_all_of_canada" value="true" name="all_of_canada" />
                                <label for="id_all_of_canada"></label>
                                <label for="id_all_of_canada">All of Canada</label>
                            </div>
                        </div>
                        {% for region in form.fields.regions.queryset %}
                        <div class="teritory-node region">
                            <div class="checkbox">
                                <input {% for current_region in form.regions.value %}{% if region.pk = current_region|add:0 %}checked="checked"{% endif %}{% endfor %} type="checkbox" id="id_regions_{{ forloop.counter0 }}" value="{{ region.id }}" name="regions" />
                                <label for="id_regions_{{ forloop.counter0 }}"></label>
                                <label for="id_regions_{{ forloop.counter0 }}">
                                    {{ region.name }}
                                </label>
                            </div>
                        </div>
                        {% endfor %}
                        <div class="clr"></div>
                    </div>

                    <input type="submit" name="submitoptions" class="button standart submit" value="Save" />
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block advertising %} {% endblock %}