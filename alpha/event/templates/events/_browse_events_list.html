{% load date_formatting %}
{% load endless %}
{% load cropping %}
{% load event_tags %}
{% load common_tags %}

<div class="entry-wrapper">
    <header>
        Total search numbers found ({{eventsFilter.qs.count}})
    </header>
    {% paginate 9 eventsFilter.qs as events %}
    {% regroup events by start_time|date:"h:i A" as events_start_time_group %}

    {% for event_group in events_start_time_group %}
        <header class="time-group">
            <span>
                {{ event_group.grouper }}
            </span>
        </header>
        {% for event in event_group.list %}
            <div class="entry-info home-page" data-no-turbolink>
                {% short_single_event event %}
            </div>
        {%endfor%}
    {% endfor %}

    {% if eventsFilter.qs.count > 0 %}
        <div class="entry-navigation-np">
            <p>
                <ul>
                    {% get_pages %}

                    <span class="step-links">
                        {% if pages.current.is_first %}
                            <span class="prev">
                                prev
                            </span>
                        {% else %}
                            <a href="{{ pages.previous.url }}" class="prev">
                                prev
                            </a>
                        {% endif %}

                        {% for page in pages %}
                            {% if page|args:10|call:'is_in_range' %}
                                <a href="{{ page.url }}"
                                    class="page{% if page.is_current %} current{%endif%}">
                                    {{ page.number }}
                                </a>
                            {% endif %}
                        {% endfor %}

                        {% if pages.current.is_last %}
                            <span class="next">
                                next
                            </span>
                        {% else %}
                            <a href="{{ pages.next.url }}" class="next">
                                next
                            </a>
                        {% endif %}
                    </span>
                </ul>
            </p>
        </div>
    {% endif %}
    
</div>