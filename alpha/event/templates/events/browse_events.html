{% extends 'home.html' %}

{% block content %}
<nav id="date-nav">
  <ul>
    <li>
      <a href="{% url event_browse_tags_date date="today" old_tags=current_tags %}" class="current">Today</a>
    </li>
    <li>
      <a href="{% url event_browse_tags_date date="tomorrow" old_tags=current_tags %}">Tomorrow</a>
    </li>
    <li>
      <a href="{% url event_browse_tags_date date="this-weekend" old_tags=current_tags %}">This weekend</a>
    </li>
    <li>
      <a href="{% url event_browse_tags_date date="next-weekend" old_tags=current_tags %}">Next weekend</a>
    </li>
    <li>
      <a href="{% url event_browse_tags_date date="this-week" old_tags=current_tags %}">This week</a>
    </li>
    <li>
      <a href="{% url event_browse_tags_date date="next-week" old_tags=current_tags %}">Next week</a>
    </li>			
    <li>
      <a href="" class="jump">Jump to date</a>
    </li>
  </ul>
</nav>

<aside id="tags">
  <nav>
    <ul>
    {% for tag in all_tags %}
      {% if tag.slug == "" %}
      <li>
	<a href = "{% url event_browse_date date=page_date %}"{{ tag.status|safe }}>{{ tag.name }} ({{ tag.number }})</a>
      </li>
      {% else %}
        {% if page_date %}
          {% if page_num < 2 %}
            <li>
	      <a href = "{% url event_browse_tags_date old_tags=tag.slug date=page_date %}"{{ tag.status|safe}}>{{ tag.name }} ({{ tag.number }})</a>
	    </li>
	  {% else %}
            <li>
	      <a href = "{% url event_browse_tags_date_num old_tags=tag.slug date=page_date num=page_num %}"{{ tag.status|safe }}>{{ tag.name }} ({{ tag.number }})</a>
	    </li>
	  {% endif %}
	{% else %}
          <li>
	    <a href = "{% url event_browse_tags old_tags=tag.slug %}"{{ tag.status|safe }}>{{ tag.name }} ({{ tag.number }})</a>
	  </li>
	{% endif %}
      {% endif %}
    {% endfor %}
    </ul>
  </nav>
</aside>

<section class="body">
  {% for set in event_sets %}
    {% if set.name %}
      <header>
	<h1>{{ set.name }}</h1>
      </header>
    {% endif %}
    <ul class="events">
      {% for event in set.events %}
        {% include 'events/event_description_small.html' %}
      {% endfor %}
    </ul>
  {% endfor %}
  {% if pages > 0 %}
    <p>
      {% if page_num > 1 %}
	{% if page_num == 2 %}
	  <a class="button page" href="{% url event_browse_tags_date old_tags=current_tags date=page_date %}">Prev</a>
	  {% else %}
	  <a class="button page" href="{% url event_browse_tags_date_num old_tags=current_tags date=page_date num=page_less %}">Prev</a>
	{% endif %}
      {% endif %}
      <a class="button page" href="{% url event_browse_tags_date_num old_tags=current_tags date=page_date num=page_more %}">Next</a>
    </p>

    <ul id="pagination">
      {% for numb in pages %}
      <li>
	<a class="current" href="{% url event_browse_tags_date_num old_tags=current_tags date=page_date num=numb %}">{{ numb }}</a>
      </li>
      {% endfor %}
    </ul>
  {% endif %}
</section>

{% endblock %}
